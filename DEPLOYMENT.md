# Cloudflare Pages éƒ¨ç½²æŒ‡å—

## ğŸ¯ é—®é¢˜è§£å†³æ–¹æ¡ˆ

è¿™ä¸ªè§£å†³æ–¹æ¡ˆè§£å†³äº† Next.js å›½é™…åŒ–è·¯ç”±åœ¨ Cloudflare Pages é™æ€éƒ¨ç½²æ—¶çš„é—®é¢˜ã€‚

### ğŸ”§ æ ¸å¿ƒä¿®æ”¹

1. **ç§»é™¤äº† Next.js å†…ç½®çš„ i18n é…ç½®**
   - é™æ€å¯¼å‡ºä¸æ”¯æŒ Next.js çš„å†…ç½®å›½é™…åŒ–è·¯ç”±
   - æ”¹ç”¨å®¢æˆ·ç«¯è¯­è¨€æ£€æµ‹

2. **åˆ›å»ºäº†ç‹¬ç«‹çš„è‹±æ–‡é¦–é¡µ** (`/pages/en.js`)
   - ä½¿ç”¨è‹±æ–‡ç¿»è¯‘æ–‡ä»¶
   - ç‹¬ç«‹çš„é™æ€ç”Ÿæˆ

3. **ä¿®å¤äº†è¯­è¨€æ£€æµ‹é€»è¾‘**
   - æ‰€æœ‰ç»„ä»¶éƒ½é€šè¿‡ `router.asPath.startsWith('/en')` æ£€æµ‹è¯­è¨€
   - è¯­è¨€åˆ‡æ¢å™¨æ­£ç¡®å¤„ç†è·¯å¾„è½¬æ¢

4. **ä¼˜åŒ–äº† Cloudflare Pages é‡å®šå‘è§„åˆ™**
   - è‹±æ–‡è·¯ç”±ï¼š`/en/*` æ˜ å°„åˆ°å¯¹åº”é¡µé¢
   - ä¸­æ–‡è·¯ç”±ï¼š`/zh/*` é‡å®šå‘åˆ°é»˜è®¤è·¯å¾„

### ğŸ“ æ–‡ä»¶ç»“æ„

```
out/
â”œâ”€â”€ index.html              # ä¸­æ–‡é¦–é¡µ
â”œâ”€â”€ en/index.html           # è‹±æ–‡é¦–é¡µ
â”œâ”€â”€ about/index.html        # ä¸­æ–‡å…³äºé¡µé¢
â”œâ”€â”€ story/
â”‚   â”œâ”€â”€ a-brave-cat-explorer/index.html
â”‚   â””â”€â”€ the-robot-who-learned-to-dance/index.html
â””â”€â”€ _redirects              # Cloudflare Pages é‡å®šå‘è§„åˆ™
```

### ğŸŒ è·¯ç”±æ˜ å°„

| è®¿é—®è·¯å¾„ | å®é™…æ–‡ä»¶ | è¯­è¨€ |
|---------|---------|------|
| `/` | `/index.html` | ä¸­æ–‡ |
| `/en` | `/en/index.html` | è‹±æ–‡ |
| `/en/` | `/en/index.html` | è‹±æ–‡ |
| `/about` | `/about/index.html` | ä¸­æ–‡ |
| `/en/about` | `/about/index.html?lang=en` | è‹±æ–‡ |
| `/story/[id]` | `/story/[id]/index.html` | ä¸­æ–‡ |
| `/en/story/[id]` | `/story/[id]/index.html?lang=en` | è‹±æ–‡ |
| `/zh/*` | é‡å®šå‘åˆ°å¯¹åº”çš„ä¸­æ–‡è·¯å¾„ | ä¸­æ–‡ |

### ğŸš€ éƒ¨ç½²æ­¥éª¤

1. **æ„å»ºé¡¹ç›®**ï¼š
   ```bash
   npm run deploy
   ```

2. **ä¸Šä¼ åˆ° Cloudflare Pages**ï¼š
   - å°† `out/` æ–‡ä»¶å¤¹çš„æ‰€æœ‰å†…å®¹ä¸Šä¼ åˆ° Cloudflare Pages
   - `_redirects` æ–‡ä»¶ä¼šè‡ªåŠ¨å¤„ç†è·¯ç”±é‡å®šå‘

3. **æµ‹è¯• URL**ï¼š
   - âœ… `https://geministorybook.online/` - ä¸­æ–‡é¦–é¡µ
   - âœ… `https://geministorybook.online/en` - è‹±æ–‡é¦–é¡µ
   - âœ… `https://geministorybook.online/en/about` - è‹±æ–‡å…³äºé¡µé¢
   - âœ… `https://geministorybook.online/en/story/[id]` - è‹±æ–‡æ•…äº‹è¯¦æƒ…
   - âœ… `https://geministorybook.online/zh/*` - é‡å®šå‘åˆ°ä¸­æ–‡ç‰ˆæœ¬

### ğŸ”„ è¯­è¨€åˆ‡æ¢

è¯­è¨€åˆ‡æ¢å™¨ä¼šæ­£ç¡®åœ°åœ¨ä»¥ä¸‹è·¯å¾„é—´åˆ‡æ¢ï¼š
- ä¸­æ–‡ï¼š`/` â†” è‹±æ–‡ï¼š`/en`
- ä¸­æ–‡ï¼š`/about` â†” è‹±æ–‡ï¼š`/en/about`
- ä¸­æ–‡ï¼š`/story/[id]` â†” è‹±æ–‡ï¼š`/en/story/[id]`

### ğŸ“ æŠ€æœ¯ç»†èŠ‚

- **è¯­è¨€æ£€æµ‹**ï¼šé€šè¿‡ `router.asPath.startsWith('/en')` æ£€æµ‹å½“å‰è¯­è¨€
- **ç¿»è¯‘åŠ è½½**ï¼šæ¯ä¸ªé¡µé¢åœ¨ `getStaticProps` ä¸­åŠ è½½å¯¹åº”è¯­è¨€çš„ç¿»è¯‘æ–‡ä»¶
- **è·¯ç”±é‡å®šå‘**ï¼šé€šè¿‡ Cloudflare Pages çš„ `_redirects` æ–‡ä»¶å¤„ç†
- **é™æ€ç”Ÿæˆ**ï¼šæ‰€æœ‰é¡µé¢éƒ½æ˜¯é™æ€ç”Ÿæˆï¼Œæ€§èƒ½æœ€ä¼˜

### âœ… éªŒè¯

è¿è¡Œ `npm run verify` å¯ä»¥éªŒè¯æ„å»ºè¾“å‡ºæ˜¯å¦æ­£ç¡®ã€‚

è¿™ä¸ªè§£å†³æ–¹æ¡ˆå®Œå…¨è§£å†³äº† Cloudflare Pages ä¸Šçš„å›½é™…åŒ–è·¯ç”±é—®é¢˜ï¼Œç”¨æˆ·ç°åœ¨å¯ä»¥æ­£å¸¸è®¿é—®æ‰€æœ‰è¯­è¨€ç‰ˆæœ¬çš„é¡µé¢ã€‚